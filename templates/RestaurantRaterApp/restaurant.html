{% extends 'RestaurantRaterApp/base.html' %}
{% load static %}
{% load restaurant_rater_tags %}

{% block title_block %}
	{% if restaurant %}
		{{ restaurant.name }}
	{% else %}
		Unknown Restaurant
	{% endif %}
{% endblock %}

{% block body_block %}
    {% if restaurant %}
        <div class="col-md-7">

            <!--- name and rating header --->
            <div class="row justify-content-center align-items-center">
                <div class="col-md-1">
                    {% include 'RestaurantRaterApp/arrow_or_heart.html' with restaurant=restaurant %}
                </div>
                <div class="col-md-6">
                    <h1>{{ restaurant.name }}</h1>
                </div>
                <div class="col-md-5">
                    {% include 'RestaurantRaterApp/stars.html' with rating=restaurant.rating %}
                </div>
            </div>

            <!--- restaurant description --->
            <div class="row justify-content-center align-items-center p-1 me-2">
                <div class="bg-warning p-3">
                    {{ restaurant.description }}
                </div>
            </div>

            <!--- map link and images --->
            <div class="row justify-content-center align-items-center p-1 me-2">
                <div id="carouselExampleControls" class="carousel slide" data-bs-ride="carousel">
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <img src="{{ MEDIA_URL}}{{ restaurant.name }}/img1.jpg" class="d-block w-100 rounded" alt="{{ restaurant.name }} image 1">
                        </div>
                        <div class="carousel-item">
                            <img src="{{ MEDIA_URL}}{{ restaurant.name }}/img2.jpg" class="d-block w-100 rounded" alt="{{ restaurant.name }} image 2">
                        </div>
                        <div class="carousel-item">
                            <img src="{{ MEDIA_URL}}{{ restaurant.name }}/img3.jpg" class="d-block w-100 rounded" alt="{{ restaurant.name }} image 3">
                        </div>
                  </div>
                  <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                  </button>
                  <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                  </button>
                </div>
            </div>

        </div>
        <div class="col-md-5">

            <!--- table of reviews --->
            <div class="row justify-content-center align-items-center">
                {% if restaurant.comments %}
                    <table class="table table-secondary table-hover">
                        <thead>
                            <tr>
                                <th scope="col"></th>
                                <th scope="col">Reviews</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for commenter, review in restaurant.comments.items %}
                                <!-- alternate cyan and yellow rows -->
                                <tr class="{% get_row_colour forloop.counter %}">
                                    <td>{{ commenter }}</td>
                                    <td>{{ review }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                {% else %}
                    <strong>Our records currently don't contain any reviews!</strong><br />
                {% endif %}
            </div>

            <!--- favourite and review buttons --->
            <div class="d-grid gap-2 d-md-flex justify-content-md-around">
                {% if restaurant %} <!--- TODO: in user.liked_restaurants --->
                    <!--- TODO: remove from favourites --->
                    <a class="btn btn-warning" href="{% url 'RestaurantRaterApp:show_restaurant' restaurant.restaurant_id %}" role="button">Remove from favourites</a>
                {% else %}
                    <!--- TODO: add to favourites --->
                    <a class="btn btn-warning" href="{% url 'RestaurantRaterApp:show_restaurant' restaurant.restaurant_id %}" role="button">Add to favourites</a>
                {% endif %}
                <a class="btn btn-warning" href="{% url 'RestaurantRaterApp:review' restaurant.restaurant_id %}" role="button">Leave a review</a>
            </div>

        </div>
	{% else %}
		Sorry, no restaurant recognised
	{% endif %}
{% endblock %}